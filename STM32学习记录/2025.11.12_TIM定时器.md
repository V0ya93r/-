- 高级定时器   TIM1,TIM8   APB2
- 通用定时器   TIM2-5         APB1
- 基本定时器   TIM6,TIM7   APB1

1. 配置RCC时钟，一般都是APB1
2. 配置时基单元
3. 使能中断
4. 配置NVIC，没有EXTI因为定时器是内部中断不是外部中断
5. 启动计时器
6. 进入中断服务程序函数
```
#include "stm32f10x.h"                  // Device header
int Cnt = 0;

void Timer_Init(void)
{
	//1.RCC
	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2,ENABLE);
	//2.时基单元,可以省去默认是内部时钟
	TIM_InternalClockConfig(TIM2);
	
	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructInit;
	TIM_TimeBaseStructInit.TIM_ClockDivision = TIM_CKD_DIV1;
	TIM_TimeBaseStructInit.TIM_CounterMode = TIM_CounterMode_Up;
	TIM_TimeBaseStructInit.TIM_Period = 7200-1; //72MHz/7200 = 10KHz
	TIM_TimeBaseStructInit.TIM_Prescaler = 10000-1; //10KHz/10000 = 1s
	TIM_TimeBaseStructInit.TIM_RepetitionCounter = 0;
	TIM_TimeBaseInit(TIM2,&TIM_TimeBaseStructInit);
	
	//3.使能中断
	TIM_ITConfig(TIM2,TIM_IT_Update,ENABLE);
	//4.配置NVIC，没有EXTI因为定时器是内部中断不是外部中断
	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);
	NVIC_InitTypeDef NVIC_InitStruct;
	NVIC_InitStruct.NVIC_IRQChannel = TIM2_IRQn;
	NVIC_InitStruct.NVIC_IRQChannelCmd = ENABLE;
	NVIC_InitStruct.NVIC_IRQChannelPreemptionPriority = 1;
	NVIC_InitStruct.NVIC_IRQChannelSubPriority = 1;
	NVIC_Init(&NVIC_InitStruct);
	//5.启动定时器
	TIM_Cmd(TIM2,ENABLE);
}

//TIM2中断服务函数
void TIM2_IRQHandler(void)
{
	if(TIM_GetITStatus(TIM2,TIM_IT_Update) == SET)
	{
		Cnt ++;
		TIM_ClearITPendingBit(TIM2,TIM_IT_Update);
	}
}

int Get_Cnt(void)
{
	return Cnt;
}
```